##### 1： 分区表

##### 1.1： 概念

```sql
分区表实际上就是对应一个HDFS文件系统上的独立的文件夹，该文件夹下是该分区所有的数据文件。Hive中的分区就是分目录，把一个大的数据集根据业务需要分割成小的数据集。在查询时通过WHERE子句中的表达式选择查询所需要的指定的分区，这样的查询效率会提高很多。
```

##### 1.2： 创建分区的方法

```sql
-- 创建一级分区
create table dept_partition(
deptno int, dname string, loc string
)
partitioned by (month string)
row format delimited fields terminated by '\t';

-- 创建二级分区
hive (default)> create table dept_partition2(
               deptno int, dname string, loc string
               )
               partitioned by (month string, day string)
               row format delimited fields terminated by '\t';
```

##### 1.3： 加载数据到分区表中

```sql
-- 加载数据到一级分区
hive (default)> load data local inpath '/opt/module/datas/dept.txt' into table default.dept_partition partition(month='201709');
hive (default)> load data local inpath '/opt/module/datas/dept.txt' into table default.dept_partition partition(month='201708');
hive (default)> load data local inpath '/opt/module/datas/dept.txt' into table default.dept_partition partition(month='201707’);
                                                                               -- 加载数据到二级分区
hive (default)> load data local inpath '/opt/module/datas/dept.txt' into table
default.dept_partition2 partition(month='201709', day='13');
```

##### 1.4: 查询分区数据

```sql
-- 单分区查询
hive (default)> select * from dept_partition where month='201709';

-- 多分区联合查询
hive (default)> select * from dept_partition where month='201709'
              union
              select * from dept_partition where month='201708'
              union
              select * from dept_partition where month='201707';
-- 多级分区查询
hive (default)> select * from dept_partition2 where month='201709' and day='13';
```

##### 1.5： 增加分区

```sql
-- 增加单个分区
hive (default)> alter table dept_partition add partition(month='201706') ;

-- 增加多个分区
hive (default)> alter table dept_partition add partition(month='201705') partition(month='201704');
```

##### 1.6： 删除分区

```sql
-- 删除单个分区
hive (default)> alter table dept_partition drop partition (month='201704');
-- 删除多个分区
hive (default)> alter table dept_partition drop partition (month='201705'), partition (month='201706');
```

##### 1.7： 查看分区表有多少分区

```sql
hive> show partitions dept_partition;
```

